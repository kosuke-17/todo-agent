# セキュリティガイド

## 実装済みセキュリティ対策

### 🔒 入力検証

- ユーザー入力の長さ制限（1000 文字以内）
- TODO 内容の長さ制限（500 文字以内）
- 危険な文字の検証（< > " ' &）
- ツール引数の型検証

### 🛡️ API セキュリティ

- OpenAI API キーの必須検証
- 無効な API キーでの実行防止
- ツール引数の安全な JSON 解析

### 📁 ファイルセキュリティ

- パストラバーサル攻撃の防止
- ファイルパスの絶対パス化
- データ構造の検証

### 🔄 メモリ管理

- 会話履歴の制限（最大 50 件）
- メモリリークの防止

### 🚨 エラーハンドリング

- 内部情報の漏洩防止
- 安全なエラーメッセージ
- ログ出力の制御

## 推奨事項

### 本番環境での追加対策

1. **環境変数の管理**

   - `.env`ファイルを`.gitignore`に追加
   - 本番環境では環境変数を使用

2. **ログ監視**

   - エラーログの監視
   - 異常なアクセスパターンの検出

3. **レート制限**

   - API 呼び出しの頻度制限
   - ユーザー入力の頻度制限

4. **データバックアップ**
   - `todos.json`の定期的なバックアップ
   - データ損失の防止

## 既知の制限事項

- 現在は単一ユーザー向けの設計
- 認証・認可機能は未実装
- 暗号化は未実装（TODO データは平文保存）

## セキュリティインシデント対応

問題を発見した場合は、以下の手順で対応してください：

1. アプリケーションの停止
2. ログの確認
3. 必要に応じてデータの復旧
4. セキュリティパッチの適用
